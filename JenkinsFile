
node('master') {
    checkout scm

    def packageType = "Shawns Package"

    echo "######### packageType==" + packageType + " ###############"

    // Load tracing definition file
    def trace = load 'pipeline/pipelineTrace.groovy'

//	def trace = new pipelineTrace()
	trace.location = WORKSPACE
    trace.startStage( "${env.BUILD_NUMBER}", "${env.GIT_BRANCH}", 'Pipeline')

    // Load Appropriate Stages
    def build = load 'pipeline/stages/_MS_Build_Stage'
	
	build.packageType = packageType
	
    echo "######### build.packageType==" + build.packageType + " ###############"
	
	
   echo "** PRE - BUILD Executed **"
//	build.execute()
   echo "** BUILD Executed **"

//    load 'pipeline/stages/_MS_Coverage_Stage'
//    load 'pipeline/stages/_MS_Install_Stage'
//    load 'pipeline/stages/_MS_ArtifactUpload_Stage'
//    load 'pipeline/stages/_MS_DeployToDev_Stage'
//    load 'pipeline/stages/_MS_DeployToTest_Stage'

    trace.endStage(WORKSPACE, "${env.BUILD_NUMBER}", "${env.GIT_BRANCH}", 'Pipeline')
  }
