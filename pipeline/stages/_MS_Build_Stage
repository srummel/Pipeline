stage('Build') {

  def trace = load 'pipeline/pipelineTrace.groovy'
  trace.startStage(WORKSPACE, "${env.BUILD_NUMBER}", "${env.GIT_BRANCH}", 'BUILD')
  
    echo "** PRE BUILD_NUMBER **"
 println build.getClass() 
    echo "** POST BUILD_NUMBER **"
  
  try {

    def nugent = load("pipeline/components/_nugent")
    nugent.executeMSBuild('${Package_type}')

    def logstash = load("pipeline/components/_logstash")
    logstash.copyLogFiles()
  }
  catch (err) {
    throw err
  }
  finally {
    trace.endStage(WORKSPACE, "${env.BUILD_NUMBER}", "${env.GIT_BRANCH}", 'BUILD')
  }
}

